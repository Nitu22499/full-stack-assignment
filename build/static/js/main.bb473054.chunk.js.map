{"version":3,"sources":["EventTable/index.tsx","PageviewGenerator/index.tsx","PageviewGenerator/logic.tsx","utilities/randomDate.ts","App.tsx","index.tsx"],"names":["EventTable","pageview","useState","events","setEvents","useEffect","axios","get","then","res","data","className","map","event","index","key","event_id","event_date","page_title","page_description","page_tags","user_id","user_joined","PageviewGenerator","setPageview","generate","start","end","id","cuid","created_at","Date","page","title","loremIpsum","description","count","tags","Array","from","length","Math","floor","random","units","user","getTime","eventObj","toISOString","join","post","usePageviewGenerator","style","fontSize","marginBottom","onClick","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sTAKaA,G,YAAa,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SAAc,EACVC,qBADU,mBAC/BC,EAD+B,KACvBC,EADuB,KAoB1C,OAjBIC,qBAAU,WAENC,IAAMC,IAAI,qCACTC,MAAK,SAAAC,GACFL,EAAUK,EAAIC,WAEpB,IAEFL,qBAAU,WAECJ,GACCG,GAAU,SAAAD,GACN,MAAM,CAAEF,GAAR,mBAAqBE,SAGnC,CAACF,IAEA,yBAAKU,UAAU,oBACjBR,EACG,2BAAOQ,UAAU,8CACb,+BACI,4BACI,wCACA,0CACA,0CACA,gDACA,yCACA,uCACA,6CAGR,+BAGQR,EAAOS,KAAI,SAACC,EAAOC,GACf,OACI,wBAAIC,IAAKD,GACL,4BAAKD,EAAMG,UACX,4BAAKH,EAAMI,YACX,4BAAKJ,EAAMK,YACX,4BAAKL,EAAMM,kBACX,4BAAKN,EAAMO,WACX,4BAAKP,EAAMQ,SACX,4BAAKR,EAAMS,mBAzB5B,yBCtBFC,EAA8B,WAAO,IAAD,ECkBb,WAAO,IAAD,EACRrB,mBAAqB,MADb,mBACjCD,EADiC,KACvBuB,EADuB,KAsCxC,MAAO,CACLC,SApCe,WACf,IC1BuBC,EAAaC,ED0B9Bd,EAAkB,CACtBe,GAAIC,MACJC,WAAY,IAAIC,KAEhBC,KAAM,CACJC,MAAOC,uBACPC,YAAaD,qBAAW,CAAEE,MAAO,IACjCC,KAAMC,MAAMC,KAAK,CAAEC,OAAQC,KAAKC,MAAsB,GAAhBD,KAAKE,YAAkB,kBAC3DT,qBAAW,CAAEU,MAAO,QAASR,MAAO,QAIxCS,KAAM,CACJjB,GAAG,OAAD,OAASC,OACXC,YCxCmBJ,EDwCI,IAAIK,KAAK,KAAM,EAAG,GCxCTJ,EDwCa,IAAII,KCvCvD,IAAIA,KAAKL,EAAMoB,UAAYL,KAAKE,UAAYhB,EAAImB,UAAYpB,EAAMoB,eD2C1DC,EAAW,CACf,SAAYlC,EAAMe,GAClB,WAAcf,EAAMiB,WAAWkB,cAC/B,WAAcnC,EAAMmB,KAAKC,MACzB,iBAAoBpB,EAAMmB,KAAKG,YAC/B,UAAatB,EAAMmB,KAAKK,KAAKY,KAAK,MAClC,QAAWpC,EAAMgC,KAAKjB,GACtB,YAAef,EAAMgC,KAAKf,WAAWkB,eAGvCxB,EAAYuB,GAGZzC,IAAM4C,KAAK,oCAAqCH,IAKhD9C,YDzD6BkD,GAAvB1B,EADuC,EACvCA,SAAUxB,EAD6B,EAC7BA,SAElB,OACE,oCACE,4BAAQmD,MAAO,CAAEC,SAAU,GAAIC,aAAc,IAAMC,QAAS9B,GAA5D,qBAICxB,GACC,oCACE,6CACA,+CAAcA,QAAd,IAAcA,OAAd,EAAcA,EAAUe,UACxB,iDAAgBf,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAUgB,YAC1B,iDAAgBhB,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAUiB,YAC1B,uDAAsBjB,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAUkB,kBAChC,gDAAelB,QAAf,IAAeA,OAAf,EAAeA,EAAUmB,WACzB,8CAAanB,QAAb,IAAaA,OAAb,EAAaA,EAAUoB,SACvB,kDAAiBpB,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAUqB,cAKjC,kBAAC,EAAD,CAAYrB,SAAUA,MGXXuD,MAZf,WACE,OACE,yBAAK7C,UAAU,OACb,4BAAQA,UAAU,cAChB,oCACA,kBAAC,EAAD,U,MCJR8C,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.bb473054.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport './index.css'\r\n \r\nexport const EventTable = ({pageview}) => {\r\n    const [events, setEvents] = useState()\r\n\r\n    useEffect(()=>{\r\n        // On page load, make API call to fetch data and set on the table.\r\n        axios.get('http://13.234.120.153/api/events/')\r\n        .then(res=>{\r\n            setEvents(res.data)\r\n        });\r\n    },[]);\r\n\r\n    useEffect(()=>{\r\n        // On props value change for pageview object, prepend the object as first row in the table.\r\n            if(pageview) {\r\n                setEvents(events => {\r\n                    return [pageview, ...events];\r\n                });\r\n            }\r\n    },[pageview]);\r\n\r\nreturn <div className=\"table-responsive\">{\r\n    !events ? (\"No Events Generated\"):(\r\n        <table className=\"table table-bordered text-white font-small\">\r\n            <thead>\r\n                <tr>\r\n                    <th>Event ID</th>\r\n                    <th>Event Date</th>\r\n                    <th>Page Title</th>\r\n                    <th>Page Description</th>\r\n                    <th>Page Tags</th>\r\n                    <th>User ID</th>\r\n                    <th>User joined</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {\r\n                    // Populate the table\r\n                    events.map((event, index)=>{\r\n                        return (\r\n                            <tr key={index}>\r\n                                <td>{event.event_id}</td>\r\n                                <td>{event.event_date}</td>\r\n                                <td>{event.page_title}</td>\r\n                                <td>{event.page_description}</td>\r\n                                <td>{event.page_tags}</td>\r\n                                <td>{event.user_id}</td>\r\n                                <td>{event.user_joined}</td>\r\n                            </tr>\r\n                        )\r\n                    })\r\n                    }\r\n            </tbody>\r\n        </table>\r\n    )\r\n    }</div> \r\n}\r\n  ","import React, { Component } from 'react'\r\nimport { usePageviewGenerator } from './logic'\r\nimport { EventTable } from '../EventTable/index'\r\n\r\nexport const PageviewGenerator: React.FC = () => {\r\n  const { generate, pageview } = usePageviewGenerator()\r\n\r\n  return (\r\n    <>\r\n      <button style={{ fontSize: 24, marginBottom: 40 }} onClick={generate}>\r\n        Generate pageview\r\n      </button>\r\n\r\n      {pageview && (\r\n        <>\r\n          <h3>Last pageview</h3>\r\n          <p>Event ID: {pageview?.event_id}</p>\r\n          <p>Event date: {pageview?.event_date}</p>\r\n          <p>Page title: {pageview?.page_title}</p>\r\n          <p>Page description: {pageview?.page_description}</p>\r\n          <p>Page tags: {pageview?.page_tags}</p>\r\n          <p>User ID: {pageview?.user_id}</p>\r\n          <p>User joined: {pageview?.user_joined}</p>\r\n        </>\r\n      )}\r\n\r\n    {/* Passing pageview object as props to the EventTable Component.   */}\r\n    <EventTable pageview={pageview} />\r\n    </>\r\n  )\r\n}\r\n","import axios from 'axios'\r\nimport cuid from 'cuid'\r\nimport { loremIpsum } from 'lorem-ipsum'\r\nimport { useState } from 'react'\r\nimport { randomDate } from '../utilities/randomDate'\r\n\r\ninterface Pageview {\r\n  id: string\r\n  created_at: Date\r\n\r\n  page: {\r\n    title: string\r\n    description: string\r\n    tags: string[]\r\n  }\r\n\r\n  user: {\r\n    id: string\r\n    created_at: Date\r\n  }\r\n}\r\n\r\nexport const usePageviewGenerator = () => {\r\n  const [pageview, setPageview] = useState<any | null>(null)\r\n\r\n  const generate = () => {\r\n    const event: Pageview = {\r\n      id: cuid(),\r\n      created_at: new Date(),\r\n\r\n      page: {\r\n        title: loremIpsum(),\r\n        description: loremIpsum({ count: 3 }),\r\n        tags: Array.from({ length: Math.floor(Math.random() * 10) }, () =>\r\n          loremIpsum({ units: 'words', count: 1 })\r\n        )\r\n      },\r\n\r\n      user: {\r\n        id: `USER${cuid()}`,\r\n        created_at: randomDate(new Date(2019, 0, 1), new Date())\r\n      }\r\n    }\r\n\r\n    const eventObj = {\r\n      \"event_id\": event.id,\r\n      \"event_date\": event.created_at.toISOString(),\r\n      \"page_title\": event.page.title,\r\n      \"page_description\": event.page.description,\r\n      \"page_tags\": event.page.tags.join(', '),\r\n      \"user_id\": event.user.id,\r\n      \"user_joined\": event.user.created_at.toISOString()\r\n    }\r\n\r\n    setPageview(eventObj)\r\n\r\n    // POST request to the API.\r\n    axios.post('http://13.234.120.153/api/events/', eventObj)\r\n  }\r\n\r\n  return {\r\n    generate,\r\n    pageview\r\n  }\r\n}\r\n","export const randomDate = (start: Date, end: Date) =>\r\n  new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()))\r\n","import React from 'react'\r\nimport './App.css'\r\nimport { PageviewGenerator } from './PageviewGenerator'\r\n\r\nfunction App() {\r\n  return (\r\n    <div className='App'>\r\n      <header className='App-header'>\r\n        <>\r\n        <PageviewGenerator />\r\n        </>\r\n      </header>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}